/*
 * Chatbox menu item
 */

jGo.fcchat_toolbar.chatbox = {};
var w=jGo.mobile?300:FCChatConfig.chatbox.dialog_width-0+200
//Chatbox style template
jGo.fcchat_toolbar.chatbox.style={
	menu_item:{
		width:180,
		icon: FCChatConfig.dir + "current_skin/bubblechat.png",
		icon_css:"",
		text:jGo.fcchat_toolbar.style.toolbar_item.text,
		buttons:jGo.fcchat_toolbar.style.toolbar_item.buttons,
		padding_left:10,
		padding_top:jGo.fcchat_toolbar.style.toolbar_item.chatcenter_layout.info_box.padding_top
	},
	dialog_box:{
		width:(jGo.mobile&&!jGo.fcchat_toolbar.config.tablet?300:FCChatConfig.chatbox.dialog_width),
		height:(jGo.mobile&&!jGo.fcchat_toolbar.config.tablet?348:FCChatConfig.chatbox.dialog_height),
		css:jGo.fcchat_toolbar.style.dialog_box.css,
		title_box_css:"top:0em;left:0em;height:3.333em;background-color:#2E9FFF;border-bottom:.083em solid #cccccc;",
		userlist_box_css:"top:3.333em;left:0em;-moz-overflow-scrolling: touch;-webkit-overflow-scrolling: touch;overflow-scrolling: touch;height:3.333em;border-top:.083em solid #cccccc;border-bottom:.083em dotted #444444;",
		tab_cover_css:"width:5.833em;height:5em;",
		up_tab_css:"",
		down_tab_css:"",
		view_msg_box_css:"-moz-overflow-scrolling: touch;-webkit-overflow-scrolling: touch;overflow-scrolling: touch;top:6.833em;left:0em;height:16.917em;padding-top:.333em;",
		send_msg_box_css:"top:24.083em;left:0em;height:4.5em;border-top:.083em dotted #444444;",
		input_css:"font-size:1em;padding:0em;height:1.5em !important;border:.083em solid silver !important;background-color:white !important;color:#44444 !important;",
		text:{
			css:"font-family:arial;font-size:1em;color:#444444;",
			title_css:"font-weight:bold;color:white;",
			link_css:"color:white;",
			disabled_css:"color:#dddddd;",
			secondary_link_css:"color:#528DC4;text-decoration:none;",
			screen_name_css:"font-family:arial;font-size:1.16em;color:green;font-weight:700;text-decoration:none;",
			timestamp_css:"color:green;",
			info:"color:gray;font-style:italic;",
			user_info_css:"color:#888888;",
			offline_css:"font-style:italic;color:green;"
		}
	},
	infobox_menu:{
		position:{
			left:null,
			top:null,
			offsetLeft:-60,
			offsetTop:30
		},
		css:{
			width:"20.833em",
			height:"20.833em",
			"font-size":"12px",
			"-webkit-box-shadow": ".083em .083em .083em rgba(0,0,0,0.3)",
			"box-shadow": "0em 0em .25em .083em rgba(0,0,0,0.3)",
			"background-color":jGo.util.getCSSProp("jGo.fcchat_toolbar.style.dialog_box.css","background-color"),
			border:".083em solid gray"
		},
		menu_item:{
			max_title_length:300,
			hide_icon:{
				css:"color:#444444;font-stretch:wider;font-size:16px;font-weight:bold;text-decoration:none"
			}
		}
	}
};

(function(){var j=jGo.$;var l=jGo.config.max_z_index-100;var m;var o;var q=jGo.fcchat_toolbar.chatbox.style;q.dialog_box.width_em=q.dialog_box.width/12;q.dialog_box.height_em=q.dialog_box.height/12;var r="href='javascript:fc_chat.";var t=jGo.mobile;var u;var v="background-color:#aaaaaa";var w="float:right;margin-right:.583em;"+q.dialog_box.text.link_css+";text-decoration:none;font-weight:bold;font-stretch:wider;";var x=q.dialog_box.text;var y=0;var z=0;var A;var B=0;function EN(a){var n=parseInt(a);return(n==null||isNaN(n)?0:n)};this.close_disc=function(){if(z){z=0;var a="00002z"+z;fc_chat.sendMsg(a,1)}};this.enable_disc=function(){j('div.fc_disc_button').html(I())};this.disable_disc=function(){j('div.fc_disc_button').html(J())};this.enable_disc_mobile=function(){j('span.fc_disc_button').html(K())};this.disable_disc_mobile=function(){j('span.fc_disc_button').html(L())};this.click_tab=function(e){if(t||e.target.getAttribute('id')=='fc_disc_up'&&B==1||e.target.getAttribute('id')=='fc_disc_down'&&B==0){C()}};this.reset_disc=function(){j("#fc_page_chat").html(D());j("#fc_disc_userlist").html("")};var C=function(){var a=j('#fc_disc_userlist_wrapper');var b=j('#fc_page_chat_wrapper');var c=j('#fc_tab_cover');var d=j('#fc_disc_up');var e=j('#fc_disc_down');var f=EN(j('#fc_page_discussion_dialog').css('font-size'));var g=(a.height()+b.height()+2)/f;var h=EN(a.css("top"))/f;var i;if(B){a.css({height:(40/12)+"em"});h+=42/12;i=g-42/12;B=0}else{a.css({height:((g-42/12)+"em")});h+=g-40/12;i=40/12;B=1}b.css({height:i+"em",top:h+"em"});c.css({top:(h-30/12)+"em"});d.css({top:(h-11/12)+"em"});e.css({top:(h+3/12)+"em"})};var D=function(){return"<div style='margin-bottom:.166em' id='fc_disc_pghdr'><span style='"+x.info+"'>"+u(463,'Chat:')+"</span><span style='margin-left:.833em;"+x.info+"' id='fc_disc_pg'></span></div>"+"<span id='fc_page_chat_loading' style='"+x.info+"'>"+u(120,'Loading Chat...Please Wait...')+"</span>"};var E=function(a){return'<a style="font-weight:bold;'+x.secondary_link_css+';text-decoration:none"'+'href="javascript:void" onclick="fc_chat.cDisc();return false">&laquo;&laquo; '+u(456,"More")+'</a>&nbsp;<span style="'+x.info+'">('+a+')</span>'};jGo._['menu.pg_info']=function(a,s,b){s=j.extend(true,{},jGo.fcchat_toolbar.chatbox.style.infobox_menu);var c=a.createWidget('DefaultMenu',[s,F(),null,j(b),p=j(document.body),(a.getexp6()||(t)?0:1),t]);return c};var F=function(){var a=u(464,'Not Specified');var b=document.title;if(b>q.infobox_menu.menu_item.max_title_length){b=b.substring(0,q.infobox_menu.menu_item.max_title_length)+'...'}if(!A.use_page_title||b==''){b=a}if(A.topic){b=A.topic}var c="<b>"+u(465,'Description')+":</b> "+a;if(A.desc){c=A.desc}return"<div style='padding:15px'>"+"<span style='"+x.info+"'><b>"+u(466,'Topic')+":</b> "+b+"<br><br>"+c+"</span></div>"};var G=function(){var a="00002z"+z;fc_chat.sendMsg(a,1)};var H=function(){return"<span class='fc_disc_count fc_info_text' style='"+q.menu_item.text.info_css+"'>("+fc_chat.discC+")</span>"};var I=function(){return"<a style='text-decoration:none;' href='javascript:jGo.fcchat_toolbar.chatbox.tgl_dialog()'>"+(q.menu_item.icon!=''?"<img style='display:block;position:absolute;top:"+(jGo.fcchat_toolbar.style.icons_16px.top)+"px; left: "+q.menu_item.padding_left+"px;width:16px;height:16px;"+q.menu_item.icon_css+"' src='"+q.menu_item.icon+"'>":"")+"<div id='jGo_disc_txt_inner' style='position:absolute;top:0px;left:"+(q.menu_item.icon!=''?31:10)+"px;width:"+(q.menu_item.width-(q.menu_item.icon!=''?28:7))+"px;padding-top:"+(q.menu_item.padding_top+fc_chat.get_ie_offset())+"px;"+jGo.fcchat_toolbar.style.text+";"+q.menu_item.buttons.states.link_css+";'>"+(A.button_text)+" "+H()+"</div>"+"</a>"};var J=function(){return"<a style='text-decoration:none;cursor:default;' href='javascript:void(0)'>"+(q.menu_item.icon!=''?"<img style='display:block;position:absolute;top:"+(jGo.fcchat_toolbar.style.icons_16px.top)+"px; left: "+q.menu_item.padding_left+"px;width:16px;height:16px;"+q.menu_item.icon_css+"' src='"+q.menu_item.icon+"'>":"")+"<div id='jGo_disc_txt_inner' style='position:absolute;top:0px;left:"+(q.menu_item.icon!=''?31:10)+"px;width:"+(q.menu_item.width-(q.menu_item.icon!=''?28:7))+"px;padding-top:"+(q.menu_item.padding_top+fc_chat.get_ie_offset())+"px;"+jGo.fcchat_toolbar.style.text+";"+q.menu_item.buttons.states.disabled_css+";'>"+(A.button_text)+" "+H()+"</div>"+"</a>"};var K=function(){var a="<a style='text-decoration:none;' href='javascript:jGo.fcchat_toolbar.chatbox.tgl_dialog()'>"+(q.menu_item.icon!=''?"<img style='width:16px;height:16px;"+q.menu_item.icon_css+"' src='"+q.menu_item.icon+"'>":"")+"&nbsp;&nbsp;<span id='jGo_disc_txt_inner' style='"+jGo.fcchat_toolbar.style.text+";"+q.menu_item.buttons.states.link_css+";'>"+(A.button_text)+" "+H()+"</span>"+"</a>";if(jGo.fcchat_toolbar.config.layout==2){a="<a style='text-decoration:none;' href='javascript:jGo.fcchat_toolbar.chatbox.tgl_dialog()'>"+"&nbsp;<span class='fc_icon fc_icon-bubble' id='jGo_disc_txt_inner' style='"+q.menu_item.buttons.states.link_css+";'>"+H()+"</span>"+"</a>"}return a};var L=function(){var a="<a style='text-decoration:none;cursor:default;' href='javascript:void(0)'>"+(q.menu_item.icon!=''?"<img style='width:16px;height:16px;"+q.menu_item.icon_css+"' src='"+q.menu_item.icon+"'>":"")+"&nbsp;&nbsp;<span id='jGo_disc_txt_inner' style='"+jGo.fcchat_toolbar.style.text+";"+q.menu_item.buttons.states.disabled_css+";'>"+(A.button_text)+" "+H()+"</span>"+"</a>";if(jGo.fcchat_toolbar.config.layout==2){a="<a style='text-decoration:none;cursor:default;' href='javascript:void(0)'>"+"&nbsp;<span class='fc_icon fc_icon-bubble' id='jGo_disc_txt_inner' style='"+q.menu_item.buttons.states.disabled_css+";'>"+H()+"</span>"+"</a>"}return a};var M=function(a,k){jGo.hooks.addHook(a+'_close_dialogs','close_disc',this,'close_disc');jGo.hooks.addHook('fcchat_enable_toolbar_fn','enable_toolbar_disc',this,'enable_disc'+(k?'_mobile':''));jGo.hooks.addHook('fcchat_disable_toolbar_fn','disable_toolbar_disc',this,'disable_disc'+(k?'_mobile':''));jGo.hooks.addHook('fcchat_reset_vars','reset_disc_chat',this,'reset_disc');u=fc_chat.textSetter;m=FCChatConfig.dir;A=fc_chat.chat_params;o=m+"current_skin/";var b=FCChatConfig.chatbox.layout;if(b==1||(q.dialog_box.width<400)){q.dialog_box.userlist_box_css+="height:6.667em;width:"+q.dialog_box.width_em+"em;";q.dialog_box.view_msg_box_css+="top:10.167em;left:0em;width:"+q.dialog_box.width_em+"em;height:"+(q.dialog_box.height_em-15.25)+"em;";q.dialog_box.send_msg_box_css+="top:"+(q.dialog_box.height_em-4.75)+"em;";q.dialog_box.input_css+=";width:"+((q.dialog_box.width-(t?30:20))/(t?16:12))+"em !important";q.dialog_box.tab_cover_css="top:7.666em;left:"+(q.dialog_box.width_em-(jGo.mobile?5:70/12))+"em;";q.dialog_box.up_tab_css="top:9.333em;left:"+(q.dialog_box.width_em-(jGo.mobile?40/12:50/12))+"em";q.dialog_box.down_tab_css="top:10.417em;left:"+(q.dialog_box.width_em-(jGo.mobile?40/12:50/12))+"em"}else{q.dialog_box.userlist_box_css+=";border-bottom:0em dotted #444444;border-left:.083em dotted #444444;width:20.833em;left:"+(q.dialog_box.width_em-20.833)+"em;height:"+(q.dialog_box.height_em-3.333)+"em;";q.dialog_box.view_msg_box_css+="top:3.417em;left:0em;width:"+(q.dialog_box.width_em-20.833)+"em;height:"+(q.dialog_box.height_em-8.417)+"em;";q.dialog_box.send_msg_box_css+=";width:"+(q.dialog_box.width_em-20.833)+"em;top:"+(q.dialog_box.height_em-4.75)+"em;";q.dialog_box.input_css+=";width:"+(q.dialog_box.width_em-20.833-(t?2.5:1.75))+"em !important";q.dialog_box.tab_cover_css="display:none;";q.dialog_box.up_tab_css="display:none;";q.dialog_box.down_tab_css="display:none;"}};jGo.fcchat_toolbar.chatbox.create=function(a){M(a);return N()};jGo.fcchat_toolbar.chatbox.create_mobile_layout=function(a){M(a,1);return L()};jGo.fcchat_toolbar.chatbox.create_dialogs=function(){return O()};jGo.fcchat_toolbar.chatbox.append_dialogs=function(a){return Q(a)};jGo.fcchat_toolbar.chatbox.tgl_dialog=function(){return R()};jGo.fcchat_toolbar.chatbox.set_more_msgs=function(a){return E(a)};var N=function(){return"<div class='fc_disc_button' style='position: absolute;width:"+q.menu_item.width+"px;top:0px;left:0px;'>"+J()+"</div>"};var O=function(){dialog="<div class='jGo_app jGo_myapp jGo_em jGo_dialog' id='fc_page_discussion_dialog' style='position:absolute;display: none;visibility: visible;"+q.dialog_box.css+";text-align:left;height:"+q.dialog_box.height_em+"em;width:"+q.dialog_box.width_em+"em;top: 113px; left:210px; z-index:"+l+";overflow:hidden;'>"+"</div>";return dialog};var P=function(){if(y==0){var a="<div id='fc_page_disc_title' style='position:absolute;width:"+q.dialog_box.width_em+"em;"+q.dialog_box.title_box_css+";overflow:hidden'><div style='padding:.583em;'><a style='"+w+"' href='javascript:jGo.fcchat_toolbar.chatbox.tgl_dialog()'>x</a><span style='"+q.dialog_box.text.title_css+"'>"+(A.title_text)+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+"<a style='"+q.dialog_box.text.link_css+"' HREF='javascript:void' onclick=\"return fc_chat.toggleMenu(this,"+fc_chat.uid+",'pg_info');\">"+u(467,'Info')+"</a>&nbsp;&nbsp;&nbsp;"+"<a style='"+q.dialog_box.text.link_css+"' "+r+"clr_disc()'>"+u(273,'Clear')+"</a></div></div>"+"<div id='fc_disc_userlist_wrapper' style='position:absolute;width:"+q.dialog_box.width_em+"em;"+q.dialog_box.userlist_box_css+";overflow:auto'><div id='fc_disc_userlist' style='padding:.25em;overflow:auto;overflow-x:hidden;"+q.dialog_box.text.css+"'>"+"</div></div>"+"<div id='fc_tab_cover' style='position: absolute;"+q.dialog_box.tab_cover_css+";'></div>"+"<div id='fc_disc_up' class='fc_drag_disc' style='position: absolute;"+q.dialog_box.up_tab_css+";background-size: 21.666em 19.167em;background-image: url("+o+"chatelems1.gif); background-repeat: no-repeat; width: 1.25em; height:.583em; background-position: -8.25em -11.417em;cursor:pointer;'></div>"+"<div id='fc_page_chat_wrapper' style='position:absolute;"+q.dialog_box.view_msg_box_css+";overflow:auto'><div id='fc_page_chat' style='padding:.25em;overflow:auto;line-height:1'>"+D()+"</div></div>"+"<div id='fc_disc_down' class='fc_drag_disc' style='position: absolute;"+q.dialog_box.down_tab_css+";background-size: 21.666em 19.167em;background-image: url("+o+"chatelems1.gif); background-repeat: no-repeat;width: 1.25em; height:.666em; background-position: -9.917em -11.417em;cursor:pointer;'></div>"+"<div id='fc_send_page_chat' style='position:absolute;width:"+q.dialog_box.width_em+"em;"+q.dialog_box.send_msg_box_css+";overflow:hidden'>"+"<div style='height:1.333em;padding:.5em'>"+(A.topic_closed||A.lock_all_discussions?"<span style='font-wieght:bold;"+q.dialog_box.text.info+"'>"+u(468,'This chat topic is closed')+"</span>":"<a id='fc_bld' style='font-size:1em;margin-left:.083em' href=\"javascript:fc_chat.insertTags(\'"+u(37)+"\',\'"+u(37)+"\',\' "+u(23)+" \',4);\" border=0>"+"<img title='"+u(23)+"' style='width:1.333em;height:1.333em;"+v+"' id='fc_e_bld' src='"+o+"text_bold.png'>"+"</a>"+"<a id='fc_it' style='font-size:1em;margin-left:.083em' href=\"javascript:fc_chat.insertTags(\'"+u(38)+"\',\'"+u(38)+"\',\' "+u(24)+" \',4);\" border=0>"+"<img title='"+u(24)+"' style='width:1.333em;height:1.333em;"+v+"' id='fc_e_it' src='"+o+"text_italic.png'>"+"</a>"+"<a id='fc_uln' style='font-size:1em;margin-left:.083em' href=\"javascript:fc_chat.insertTags(\'"+u(39)+"\',\'"+u(39)+"\',\' "+u(25)+" \',4);\" border=0>"+"<img title='"+u(25)+"' style='width:1.333em;height:1.333em;"+v+"' id='fc_e_uln' src='"+o+"text_underline.png'>"+"</a>"+"<a id='fc_img' style='font-size:1em;margin-left:.166em' href=\"javascript:fc_chat.insertTags(\'[[\',\']]\',\'"+u(36)+"\',4);\" border=0>"+"<img title='"+u(26)+"' style='width:1.333em;height:1.333em;' id='fc_e_img' src='"+o+"image_1.png'>"+"</a>"+"<a class='fc_tools_a' style='font-size:1em;margin-left:.166em' href=\"javascript:fc_chat.tgl_tools(0,"+FCChatConfig.styles.chat_window.main_panel.tools_panel.smileys.width+","+FCChatConfig.styles.chat_window.main_panel.tools_panel.smileys.height+",4)\">"+"<img id='fc_e_sml3' style='width:1.333em;height:1.333em;' src='"+o+"emoticon_smile.png'>"+"</a>"+(FCChatConfig.upload_images_enabled?"<a id='fc_imgu' style='font-size:1em;margin-left:.166em;' href=\"javascript:fc_chat.launch_uploads();\">"+"<img style='width:1.333em;height:1.333em;' title='"+u(27)+"'src='"+o+"upload_image.png'>"+"</a>":"")+(FCChatConfig.change_avatar?"<a id='fc_avu' style='font-size:1em;margin-left:.166em;' href=\"javascript:fc_chat.launch_avatar();\">"+"<img style='width:1.333em;height:1.333em;' title='"+u(29)+"'src='"+o+"add_avatar.png'>"+"</a>":"")+(FCChatConfig.transliteration_enabled?"<a  id='fc_trlit' style='font-size:1em;margin-left:.166em;' "+r+"open_trlit()'>"+"<img style='width:1.333em;height:1.333em;' title='"+u(304,"Type in your language")+"' src='"+o+"google_transliteration.png'>"+"</a>":"")+"<a title='"+u(295,"doodlepad")+"' id='fc_note' style='font-size:1em;margin-left:.166em' "+r+"note(1)'>"+"<img style='width:1.333em;height:1.333em;' src='"+o+"pencil.png'>"+"</a>"+"<a title='"+u(311,"Share a document")+"' id='fc_doc' style='font-size:1em;margin-left:.166em;' "+r+"doc(2)'>"+"<img style='width:1.333em;height:1.333em;'  src='"+o+"document.png'>"+"</a>"+"<a id='fc_vid' style='font-size:1em;margin-left:.083em"+(fc_chat.vidAcc>1?"":"disabled")+"' "+r+"launchVideoChat(0)'>"+"<img style='width:1.333em;height:1.333em;' title='"+u(31)+(fc_chat.vidAcc>1?'':' '+u(32))+"' id='fc_e_vid' src='"+o+"webcam.png'>"+"</a>"+" <input id='fc_sendpagechat' class='fc_input' onKeyPress='fc_chat.oKD(event)' onKeyDown='fc_chat.oKD2(event)' type=text style='"+q.dialog_box.input_css+"'><br>")+"</div></div>";j("#fc_page_discussion_dialog").html(a);j('div.fc_drag_disc').bind('click',this.click_tab);if(t)j('#fc_sendpagechat').css({'font-size':'1.333em',height:'1.125em'});y=1}};var Q=function(a){j(document.body).append(a)};var R=function(){if(!fc_chat.get('login_lock')&&!fc_chat.get('l')){fc_chat.rescale();z=jGo.fcchat_toolbar.control.toggle_dialog(j("#fc_page_discussion_dialog"),S,P,200);fc_chat.tgl_disc();G()}};var S=function(){jGo.fcchat_toolbar.control.position_dialog(j("#fc_page_discussion_dialog"),EN(j("#fc_chatbox_toolbar_item").css("left")),q.dialog_box.width,q.dialog_box.height*(jGo._['scalefactor']||1),(jGo.fcchat_toolbar.config.layout==2))}})();

if(jGo.scripts)jGo.scripts.onLoad('chatbox.js');