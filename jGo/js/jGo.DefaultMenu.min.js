(function(){var $=jGo.$;jGo.DefaultMenu=function(){jGo.Menu.apply(this,arguments);this.type='DefaultMenu';this.eventsEnabled=true;this.isOpen=false;this.noHide=false;this.parent;this.target;this.frame;this.style;this.fixed;this.mobile;this.getDefault=function(){return jGo.DefaultMenu.prototype};this.err=function(){alert("Method not found.")}};jGo.DefaultMenu.prototype=new jGo.Menu();var j=jGo.DefaultMenu.prototype;j.create=function(a,p){var s=this.style=$.extend({},p[0]);this.target=p[3];this.parent=p[4];this.fixed=p[5];this.mobile=p[6];var b='jGo_app jGo_myapp defaultmenu'+a;var c="<div style='position:relative'>"+p[1]+"</div>";this.frame=$(document.createElement('div')).addClass(b).attr('id','jGo_defaultmenuF'+a).css({position:(this.fixed?'fixed':'absolute'),display:'none','z-index':jGo.config.max_z_index}).css(s.css).html(c);this.parent.append(this.frame);this.target.onEvent('mousedown',this,'onMouseDown','');this.frame.onEvent('mousedown',this,'onMouseDown','');this.id=a};j.onMouseDown=function(e){this.noHide=true};j.mouseOff=function(e){var a=(document.body.scrollHeight>=document.documentElement.scrollHeight)?document.body:document.documentElement;var b=(a.scrollLeft)?a.scrollLeft:0;if((b+a.clientWidth)>e.pageX||a.clientWidth==0){if(!this.noHide)this.hide();this.noHide=false}};j.position=function(a){var s=this.style.position,t=this.target,p=this.parent,offset=48,right_margin=25,bottom_margin=20,displayLeft=0;var b=(s.left||(t.offset().left+s.offsetLeft-(p[0]===document.body?'0':jGo.util.eN(p.offset().left))))-9;var c=(s.top||(t.offset().top+(this.fixed?-$(document).scrollTop():0)+s.offsetTop-(p[0]===document.body?'0':jGo.util.eN(p.offset().top))))-9;var d=this.frame.height();var e=this.frame.width();var f=jGo.util.getSWidth();var g=e+right_margin+b+(p[0]===document.body?0:jGo.util.eN(p.offset().left));if(f<g&&g>e&&!this.mobile){displayLeft=1}var h=$(window).scrollTop()+(this.fixed?-$(document).scrollTop():0)+jGo.util.getSHeight();var i=d+c+(p[0]===document.body?0:jGo.util.eN(p.offset().top));if(h-bottom_margin<i){c-=(i-h+bottom_margin)};if(jGo.browser.browser!='Explorer'){if(displayLeft==0){this.frame[0].style.left=b+'px'}else{this.frame[0].style.left='auto';this.frame[0].style.left=(b+offset-e)+'px'}this.frame[0].style.top=c+'px'}else{if(displayLeft==0){this.frame[0].style.pixelLeft=b}else{this.frame[0].style.pixelLeft=b+offset-e}this.frame[0].style.pixelTop=c}};j.show=function(){jGo.onEvent('mousedown','defaultmenu'+this.id,this,'mouseOff');this.position();this.frame.css("display","block");this.isOpen=true;this.noHide=false};j.hide=function(){jGo.UI.removeHandler('mousedown','defaultmenu'+this.id);this.frame.css("display","none");this.isOpen=false};j.close=function(){this.frame.empty();this.frame.remove();this.target.removeEventHandler('mousedown');jGo.UI.removeHandler('mousedown','defaultmenu'+this.id);this.isOpen=false;return true};j.destroy=function(){return false};jGo.DefaultMenuController=function(a,b,c,d,e,f){this.id=a;this.no_hide=false;this.target=$(b);this.menu=$(c);this.obj=d;this.control_target=f||false;this.toggleFunction=e;this.enableControl()};var k=jGo.DefaultMenuController.prototype;k.mouseOn=function(e){this.no_hide=true};k.mouseDown=function(e){var a=(document.body.scrollHeight>=document.documentElement.scrollHeight)?document.body:document.documentElement;var b=(a.scrollLeft)?a.scrollLeft:0;if((b+a.clientWidth)>e.pageX||a.clientWidth==0){if(!this.no_hide&&this.is_open())this.toggle(true)}this.no_hide=false};k.toggle=function(){if(arguments[0]==true||this.control_target)this.obj[this.toggleFunction]()};k.is_open=function(){return!($(this.menu).css("display")=="none"||$(this.menu).css("visibility")=="hidden")};k.enableControl=function(){this.target.onEvent('mousedown',this,'mouseOn','');this.menu.onEvent('mousedown',this,'mouseOn','');jGo.onEvent('mousedown','menucontroller'+this.id,this,'mouseDown')};k.disableControl=function(){this.target.removeEventHandler('mousedown');this.menu.removeEventHandler('mousedown');jGo.UI.removeHandler('mousedown','menucontroller'+this.id)}})();jGo.UI.registerWidgetClass(jGo.DefaultMenu,'DefaultMenu','complex.menus');jGo.scripts.onLoad('jGo.DefaultMenu.min.js');