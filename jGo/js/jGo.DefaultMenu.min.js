(function(){var $=jGo.$;jGo.DefaultMenu=function(){jGo.Menu.apply(this,arguments);this.type='DefaultMenu';this.eventsEnabled=true;this.isOpen=false;this.noHide=false;this.parent;this.target;this.frame;this.style;this.fixed;this.mobile;this.getDefault=function(){return jGo.DefaultMenu.prototype};this.err=function(){alert("Method not found.")}};jGo.DefaultMenu.prototype=new jGo.Menu();var i=jGo.DefaultMenu.prototype;i.create=function(a,p){this.style=$.extend({},p[0]);this.style.css['font-size']=Math.round(jGo.util.eN(this.style.css['font-size'])*(jGo._['scalefactor']||1))+'px';var s=this.style;this.target=p[3];this.parent=p[4];this.fixed=p[5];this.mobile=p[6];var b='jGo_app jGo_myapp jGo_em defaultmenu'+a;var c="<div style='position:relative'>"+p[1]+"</div>";this.frame=$(document.createElement('div')).addClass(b).attr('id','jGo_defaultmenuF'+a).css({position:(this.fixed?'fixed':'absolute'),display:'none','z-index':jGo.config.max_z_index}).css(s.css).html(c);this.parent.append(this.frame);this.target.onEvent('mousedown',this,'onMouseDown','');this.target.onEvent('touchstart',this,'onMouseDown','');this.frame.onEvent('mousedown',this,'onMouseDown','');this.frame.onEvent('touchstart',this,'onMouseDown','');this.id=a};i.onMouseDown=function(e){this.noHide=true};i.mouseOff=function(e){var a=(document.body.scrollHeight>=document.documentElement.scrollHeight)?document.body:document.documentElement;var b=(a.scrollLeft)?a.scrollLeft:0;if(!e.pageX||(b+a.clientWidth)>e.pageX||a.clientWidth==0){if(!this.noHide)this.hide();this.noHide=false}};i.position=function(){var s=this.style.position,t=this.target,p=this.parent,offset=48,right_margin=25,bottom_margin=20,displayLeft=0;var a=(s.left||(t.offset().left+Math.round(s.offsetLeft*(jGo._['scalefactor']||1))-(p[0]===document.body?'0':jGo.util.eN(p.offset().left))))-9;var b=(s.top||(t.offset().top+(this.fixed?-$(document).scrollTop():0)+Math.round(s.offsetTop*(jGo._['scalefactor']||1))-(p[0]===document.body?'0':jGo.util.eN(p.offset().top))))-9;var c=this.frame.height();var d=this.frame.width();var e=jGo.util.getSWidth();var f=d+right_margin+a+(p[0]===document.body?0:jGo.util.eN(p.offset().left));if(e<f&&f>d&&!this.mobile){displayLeft=1}var g=$(window).scrollTop()+(this.fixed?-$(document).scrollTop():0)+jGo.util.getSHeight();var h=c+b+(p[0]===document.body?0:jGo.util.eN(p.offset().top));if(g-bottom_margin<h){b-=(h-g+bottom_margin)};if(jGo.browser.browser!='Explorer'){if(displayLeft==0){this.frame[0].style.left=a+'px'}else{this.frame[0].style.left='auto';this.frame[0].style.left=(a+offset-d)+'px'}this.frame[0].style.top=b+'px'}else{if(displayLeft==0){this.frame[0].style.pixelLeft=a}else{this.frame[0].style.pixelLeft=a+offset-d}this.frame[0].style.pixelTop=b}};i.show=function(){jGo.onEvent('mousedown','defaultmenu'+this.id,this,'mouseOff');jGo.onEvent('touchstart','defaultmenu'+this.id,this,'mouseOff');this.position();this.frame.css("display","block");this.isOpen=true;this.noHide=false};i.hide=function(){jGo.UI.removeHandler('mousedown','defaultmenu'+this.id);jGo.UI.removeHandler('touchstart','defaultmenu'+this.id);this.frame.css("display","none");this.isOpen=false};i.close=function(){this.frame.empty();this.frame.remove();this.target.removeEventHandler('mousedown');this.target.removeEventHandler('touchstart');jGo.UI.removeHandler('mousedown','defaultmenu'+this.id);jGo.UI.removeHandler('touchstart','defaultmenu'+this.id);this.isOpen=false;return true};i.destroy=function(){return false};jGo.DefaultMenuController=function(a,b,c,d,e,f){this.id=a;this.no_hide=false;this.target=$(b);this.menu=$(c);this.obj=d;this.control_target=f||false;this.toggleFunction=e;this.enableControl()};var j=jGo.DefaultMenuController.prototype;j.mouseOn=function(e){this.no_hide=true};j.mouseDown=function(e){var a=(document.body.scrollHeight>=document.documentElement.scrollHeight)?document.body:document.documentElement;var b=(a.scrollLeft)?a.scrollLeft:0;if(!e.pageX||(b+a.clientWidth)>e.pageX||a.clientWidth==0){if(!this.no_hide&&this.is_open())this.toggle(true)}this.no_hide=false};j.toggle=function(){if(arguments[0]==true||this.control_target)this.obj[this.toggleFunction]()};j.is_open=function(){return!($(this.menu).css("display")=="none"||$(this.menu).css("visibility")=="hidden")};j.enableControl=function(){this.target.onEvent('mousedown',this,'mouseOn','');this.menu.onEvent('mousedown',this,'mouseOn','');jGo.onEvent('mousedown','menucontroller'+this.id,this,'mouseDown');this.target.onEvent('touchstart',this,'mouseOn','');this.menu.onEvent('touchstart',this,'mouseOn','');jGo.onEvent('touchstart','menucontroller'+this.id,this,'mouseDown')};j.disableControl=function(){this.target.removeEventHandler('mousedown');this.menu.removeEventHandler('mousedown');jGo.UI.removeHandler('mousedown','menucontroller'+this.id);this.target.removeEventHandler('touchstart');this.menu.removeEventHandler('touchstart');jGo.UI.removeHandler('touchstart','menucontroller'+this.id)}})();
jGo.UI.registerWidgetClass(jGo.DefaultMenu,'DefaultMenu','complex.menus');jGo.scripts.onLoad('jGo.DefaultMenu.min.js');