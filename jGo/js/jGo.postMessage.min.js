jGo.postMessage={};(function(){var f,last_hash,first_try=true,cache_bust=1,rm_callback,window=this,FALSE=!1,postMessage='postMessage',addEventListener='addEventListener',p_receiveMessage,has_postMessage=window[postMessage];jGo.postMessage.post=function(a,b,c){if(!b){return}a=typeof a==='string'?a:jGo.$.param(a);c=c||parent;if(has_postMessage){c[postMessage](a,b.replace(/([^:]+:\/\/[^\/]+).*/,'$1'))}else if(b){c.location=b.replace(/#.*$/,'')+'#'+(+new Date)+(cache_bust++)+'&'+a}};jGo.postMessage.receive=p_receiveMessage=function(b,c,d){if(has_postMessage){if(b){rm_callback&&p_receiveMessage();rm_callback=function(e){if((typeof c==='string'&&c.indexOf(e.origin)!=0)||(jGo.$.isFunction(c)&&c(e.origin)===FALSE)){return FALSE}b(e)}}if(window[addEventListener]){window[b?addEventListener:'removeEventListener']('message',rm_callback,FALSE)}else{window[b?'attachEvent':'detachEvent']('onmessage',rm_callback)}}else{f&&clearInterval(f);f=null;if(b){d=typeof c==='number'?c:typeof d==='number'?d:100;f=setInterval(function(){var a=document.location.hash,re=/^#?\d+&/;if(first_try){last_hash=document.location.hash;first_try=false}if(a!==last_hash&&re.test(a)){last_hash=a;b({data:a.replace(re,'')})}},d)}}}})();if(jGo.scripts)jGo.scripts.onLoad('jGo.postMessage.min.js');