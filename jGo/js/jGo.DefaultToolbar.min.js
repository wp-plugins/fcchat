(function(){var $=jGo.$;var x=jGo.config.z_index_base;jGo.DefaultToolbar=function(){jGo.Control.apply(this,arguments);this.type='DefaultToolbar';this.context;this.items;this.placement;this.left_offset;this.minimized_text;this.isVisible;this.minimized;this.parent;this.config;this.IE6Mode=false;this.app_prefix;this.track_window_events;this.reposition_enabled=true;this.width;this.min_width;this.dialog_fade_interval=250;this.style={};this.getDefault=function(){return jGo.DefaultToolbar.prototype};this.err=function(){alert("Method not found.")}};jGo.DefaultToolbar.prototype=new jGo.Control();var y=jGo.DefaultToolbar.prototype;y.create=function(a,p){this.context=p[0];this.items=p[1];this.app_prefix=p[10]||'jGo_'+a;var b=this.app_prefix;var c=p[4]||p[1][p[1].length-1];var d=this.style=(this.context.style?$.extend({},this.context.style):this.style);this.placement=p[2]||'bottomright';this.minimized_text=p[3]||'FriendsCenter';this.minimized=p[8]||false;this.isVisible=(p[7]!=null?p[7]:true);this.parent=p[9]||$(document.body);this.track_window_events=(p[11]!=null?p[11]:true);this.left_offset=p[6]||26;this.config=p[12];this.placement=(this.placement.indexOf('top')!=-1?1:0)+(this.placement.indexOf('left')!=-1?2:0);this.width=this.calculateWidth(0)+d.icon_tray.width;this.min_width=this.width-(this.calculateWidth(c)+this.context[c].style.menu_item.width)+d.icon_tray.restore.width+20;var f=(this.placement<2);if(!f){this.min_width=d.icon_tray.restore.width+d.icon_tray.width+10+this.calculateWidth(c)}var g=0;try{if(jGo.browser.browser=="Explorer"){if((jGo.browser.version=='5'||jGo.browser.version=='6')){this.IE6Mode=true}g=1}if(jGo.browser.browser=="Safari"){g=-1}}catch(e){}var h=this.config.layout;var j=this.getCurrentWidth();var k=(this.IE6Mode?(this.placement%2!=0?-d.border_height:jGo.util.getInnerHeight()-d.height-d.border_height):0)+(p[5]?p[5]:0);var l=(this.placement>1?5:jGo.util.getSWidth()-(j+this.left_offset));var m=0;var n=(this.IE6Mode||h==1?l:0);var o='display:'+(this.minimized?'none':'block')+';';var q='display:'+(this.minimized?'block':'none')+';';var r="<div class='"+b+"toolbar' id='"+b+"toolbar_inner' style='position: absolute; display: block; "+"top: "+m+"px;"+"left: "+n+"px;"+"width:"+j+"px;height:"+d.height+"px;z-index: "+(x+104)+";"+(h==1?"":d.css)+"'>";var s=(f?0:1);for(var i=0;i<this.items.length;i++){var t=this.calculateWidth(this.items[i]);if(this.minimized&&s&&f){t=t-(this.width-this.min_width)}if(i!=0){r+="<img class='"+(!s?b+"toolbar_divider":b+"toolbar_divider2")+"' src='"+jGo.config.path+"/current_skin/trans.gif' style='position:absolute;"+(!s?o:"display:block;")+"left:"+(t-1)+"px;"+d.divider_css+"'>"}if(this.items[i]==c&&!f){s=0}var u="<div class='"+(!s?b+"toolbar_item":b+"toolbar_item2")+"' id='"+b+this.items[i]+"_toolbar_item' style='position:absolute;"+(!s?o:"display:block;")+"top:0px;left:"+t+"px'>";r+=u+this.context[this.items[i]].create('default_toolbar'+a);if(this.items[i]==c){s=(f?1:0)}r+="</div>"}r+="<div id='"+b+"os_start' style='position: absolute;"+q+"top: "+(d.icon_tray.hide_icon.top+g)+"px; left: "+(!f?this.min_width-d.icon_tray.minimize_icon.offset-d.icon_tray.restore.width:7)+"px;z-index: "+(x+102)+";'>"+"<a class='"+b+"toggle_toolbar' style='"+d.icon_tray.hide_icon.css+"' href='JavaScript:void(0);'>"+(!f?this.minimized_text+"&raquo;&raquo;":"&laquo;&laquo;"+this.minimized_text)+"</a>"+"</div>"+(this.config.layout==0?"<div id='"+b+"os_min' style='position: absolute;"+o+"top: "+(d.icon_tray.minimize_icon.top+g)+"px; left: "+(this.width-d.icon_tray.minimize_icon.offset)+"px;z-index: "+(x+102)+";'>"+"<a class='"+b+"toggle_toolbar' style='"+d.icon_tray.minimize_icon.css+"' href='JavaScript:void(0);'>"+(!f?"&laquo;&laquo;":"&raquo;&raquo;")+"</a>"+"</div>":"")+"<div id='"+b+"xxx' style='position: absolute; display: block; top: "+(d.icon_tray.hide_icon.top+g)+"px; left: "+(j-d.icon_tray.hide_icon.offset)+"px;z-index: "+(x+102)+";'>"+"<a id='"+b+"close_toolbar' style='"+d.icon_tray.hide_icon.css+"' href='JavaScript:void(0);'>x</a>"+"</div>"+"</div>";var v={'border-top':'0px'};var w={top:k+'px'};if(h==0){w={top:(k-d.border_height)+'px'}}if(this.placement%2==0){v={'border-bottom':'0px'};if(!this.IE6Mode)w={bottom:'0px'}}this.frame=$(document.createElement('div')).addClass('jGo_app jGo_myapp default_toolbar').attr('id',b+'toolbar').css({'position':(this.config.fixed==0?'absolute':'fixed'),'z-index':jGo.config.max_z_index-2,'display':(this.isVisible?'block':'none')}).css(w);if(h>=1){this.frame.css({left:'0px','height':d.height+'px',width:(this.config.fixed==0&&this.config.mobile?$(document).width()+'px':'100%')}).css(d.banner_css).css(v)}else{this.frame.css({left:l+'px','height':(d.height+d.border_height)+'px'})}this.parent.prepend(this.frame.html((h==2||this.config.mode==0?"":r)));this.windowEventsHandler(this.track_window_events);$("a."+b+"toggle_toolbar").onEvent('click',this,'toggle','');$("#"+b+"close_toolbar").onEvent('click',this,'hide','');this.id=a};y.calculateWidth=function(a){var b=0;for(var i=0;i<this.items.length;i++){if(this.items[i]==a)return b;b+=this.context[this.items[i]].style.menu_item.width}return b};y.getCurrentWidth=function(){return(this.minimized?this.min_width:this.width)};y.toggle=function(){var a=this.minimized=(this.minimized?false:true);var b=this.getCurrentWidth();var c=this.width-this.min_width;var d=this.app_prefix;var e='none';var f='block';$("div."+d+"toolbar_item,img."+d+"toolbar_divider,#"+d+"os_min").css({"display":(!a?f:e)});if(this.placement<2){$("div."+d+"toolbar_item2,img."+d+"toolbar_divider2").each(function(){$(this).css({"left":jGo.util.eN($(this).css("left"))+(!a?c:-c)+"px"})})}$("#"+d+"os_start").css({"display":(!a?e:f)});$("#"+d+"xxx").css({"left":(b-this.style.icon_tray.hide_icon.offset)+'px'});this.frame.css({"width":b+"px"});$("#"+d+"toolbar_inner").css({"width":b+"px"});this.close_dialogs();this.reposition()};y.windowEventsHandler=function(a){var b=null;var c=this;var d=function(){clearTimeout(b);b=setTimeout(function(){c.reposition()},80)};if(a){$(window).resize(d);if(this.IE6Mode){$(window).scroll(d)}}else{$(window).unbind('scroll',d);$(window).unbind('resize',d)}};y.reposition=function(){if(this.reposition_enabled&&this.frame.css("display")=="block"){var a=(this.IE6Mode||this.config.layout==1?$("#"+this.app_prefix+"toolbar_inner"):this.frame);if(this.IE6Mode){this.frame.css("display","none");if(this.placement%2==0){a.css('top',($(document).scrollTop()+jGo.util.getInnerHeight()-this.style.height-this.style.border_height)+'px')}else{a.css('top',($(document).scrollTop()-1-this.style.border_height)+'px')}}else{this.close_dialogs()}if(this.placement<2){a.css('left',(jGo.util.getSWidth()-(this.getCurrentWidth()+this.left_offset))+'px')}this.frame.css("display","block")}};y.show=function(){this.frame.css("display","block");this.isVisible=true};y.hide=function(){this.close_dialogs();this.frame.css("display","none");this.isVisible=false};y.close=function(){this.frame.empty();this.frame.remove();return true};y.toggle_dialog=function(a,b,c,d,e){d=d||this.dialbog_fade_interval;if(a.css("display")!="none"&&!e){$("div.jGo_dialog").fadeOut(d);return 0}else{this.close_dialogs();b();if(c){c()}a.fadeIn(d);return 1}};y.position_dialog=function(a,b,c,d,e){var f="#"+this.app_prefix+"toolbar_inner";var g=this.IE6Mode||this.config.mobile||this.fixed==0;var h=(this.config.layout==0?8:10);var i=(g?"absolute":"fixed");var j=Math.max(3,jGo.util.eN(jGo.util.returnElementCoordinates(f,!(g)).x)+b);var k=(!e?Math.min(0,this.getCurrentWidth()-b-(c+3)):0);a.css({position:i,top:((jGo.util.returnElementCoordinates(f,!(g)).y)-(this.placement%2!=0?-this.frame.height()-4:h+d-this.style.border_height))+'px',left:j+(j+k>3?k:0)+"px"})};y.close_dialogs=function(){jGo.hooks.doHooks('default_toolbar'+this.id+'_close_dialogs');$("div.jGo_dialog").css("display","none")};y.destroy=function(){return false}})();
jGo.UI.registerWidgetClass(jGo.DefaultToolbar,'DefaultToolbar','complex.controls');jGo.scripts.onLoad('jGo.DefaultToolbar.min.js');