(function(){var $=jGo.$;var u=jGo.config.z_index_base;jGo.DefaultToolbar=function(){jGo.Control.apply(this,arguments);this.type='DefaultToolbar';this.context;this.items;this.placement;this.left_offset;this.minimized_text;this.isVisible;this.minimized;this.parent;this.IE6Mode=false;this.app_prefix;this.track_window_events;this.reposition_enabled=true;this.width;this.min_width;this.dialog_fade_interval=250;this.style={};this.getDefault=function(){return jGo.DefaultToolbar.prototype};this.err=function(){alert("Method not found.")}};jGo.DefaultToolbar.prototype=new jGo.Control();var v=jGo.DefaultToolbar.prototype;v.create=function(a,p){this.context=p[0];this.items=p[1];this.app_prefix=p[10]||'jGo_'+a;var b=this.app_prefix;var c=p[4]||p[1][p[1].length-1];var d=this.style=(this.context.style?$.extend({},this.context.style):this.style);this.placement=p[2]||'bottomright';this.minimized_text=p[3]||'FriendsCenter';this.minimized=p[8]||false;this.isVisible=(p[7]!=null?p[7]:true);this.parent=p[9]||$(document.body);this.track_window_events=(p[11]!=null?p[11]:true);this.left_offset=p[6]||26;this.width=this.calculateWidth(0)+d.icon_tray.width;this.min_width=this.width-(this.calculateWidth(c)+this.context[c].style.menu_item.width)+d.icon_tray.restore.width+20;var f=(this.placement.indexOf('right')!=-1);if(!f){this.min_width=d.icon_tray.restore.width+d.icon_tray.width+10+this.calculateWidth(c)}var g=this.getCurrentWidth();var h=(this.placement.indexOf('top')!=-1?-1:jGo.util.getInnerHeight()-d.height)+(p[5]?p[5]:0);var j=(this.placement.indexOf('left')!=-1?5:jGo.util.getSWidth()-(g+this.left_offset));var k=0;try{if(jGo.browser.browser=="Explorer"){if((jGo.browser.version=='5'||jGo.browser.version=='6')){this.IE6Mode=true}k=1}if(jGo.browser.browser=="Safari"){k=-1}}catch(e){}var l=0;var m=(this.IE6Mode?j:0);var n='display:'+(this.minimized?'none':'block')+';';var o='display:'+(this.minimized?'block':'none')+';';var q="<div class='"+b+"toolbar' id='"+b+"toolbar_inner' style='position: absolute; display: block; "+"top: "+l+"px;"+"left: "+m+"px;"+"width:"+g+"px;height:"+d.height+"px;z-index: "+(u+104)+";"+d.css+"'>";var r=(f?0:1);for(var i=0;i<this.items.length;i++){var s=this.calculateWidth(this.items[i]);if(this.minimized&&r&&f){s=s-(this.width-this.min_width)}if(i!=0){q+="<img class='"+(!r?b+"toolbar_divider":b+"toolbar_divider2")+"' src='"+jGo.config.path+"/current_skin/trans.gif' style='position:absolute;"+(!r?n:"display:block;")+"left:"+(s-1)+"px;"+d.divider_css+"'>"}if(this.items[i]==c&&!f){r=0}var t="<div class='"+(!r?b+"toolbar_item":b+"toolbar_item2")+"' id='"+b+this.items[i]+"_toolbar_item' style='position:absolute;"+(!r?n:"display:block;")+"top:0px;left:"+s+"px'>";q+=t+this.context[this.items[i]].create();if(this.items[i]==c){r=(f?1:0)}q+="</div>"}q+="<div id='"+b+"os_start' style='position: absolute;"+o+"top: "+(d.icon_tray.hide_icon.top+k)+"px; left: "+(!f?this.min_width-d.icon_tray.minimize_icon.offset-d.icon_tray.restore.width:7)+"px;z-index: "+(u+102)+";'>"+"<a class='"+b+"toggle_toolbar' style='"+d.icon_tray.hide_icon.css+"' href='JavaScript:void(0);'>"+(!f?this.minimized_text+"&raquo;&raquo;":"&laquo;&laquo;"+this.minimized_text)+"</a>"+"</div>"+"<div id='"+b+"os_min' style='position: absolute;"+n+"top: "+(d.icon_tray.minimize_icon.top+k)+"px; left: "+(this.width-d.icon_tray.minimize_icon.offset)+"px;z-index: "+(u+102)+";'>"+"<a class='"+b+"toggle_toolbar' style='"+d.icon_tray.minimize_icon.css+"' href='JavaScript:void(0);'>"+(!f?"&laquo;&laquo;":"&raquo;&raquo;")+"</a>"+"</div>"+"<div id='"+b+"xxx' style='position: absolute; display: block; top: "+(d.icon_tray.hide_icon.top+k)+"px; left: "+(g-d.icon_tray.hide_icon.offset)+"px;z-index: "+(u+102)+";'>"+"<a id='"+b+"close_toolbar' style='"+d.icon_tray.hide_icon.css+"' href='JavaScript:void(0);'>x</a>"+"</div>"+"</div>";this.frame=$(document.createElement('div')).addClass('jGo_app jGo_myapp default_toolbar').attr('id',b+'toolbar').css({'position':'fixed','z-index':jGo.config.max_z_index,'visibility':(this.isVisible?'visible':'hidden'),top:h+'px',left:j+'px'}).html(q);this.parent.append(this.frame);this.windowEventsHandler(this.track_window_events);$("a."+b+"toggle_toolbar").onEvent('click',this,'toggle','');$("#"+b+"close_toolbar").onEvent('click',this,'hide','');this.id=a};v.calculateWidth=function(a){var b=0;for(var i=0;i<this.items.length;i++){if(this.items[i]==a)return b;b+=this.context[this.items[i]].style.menu_item.width}return b};v.getCurrentWidth=function(){return(this.minimized?this.min_width:this.width)};v.toggle=function(){var a=this.minimized=(this.minimized?false:true);var b=this.getCurrentWidth();var c=this.width-this.min_width;var d=this.app_prefix;var e='none';var f='block';$("div."+d+"toolbar_item,img."+d+"toolbar_divider,#"+d+"os_min").css({"display":(!a?f:e)});if(this.placement.indexOf('right')!=-1){$("div."+d+"toolbar_item2,img."+d+"toolbar_divider2").each(function(){$(this).css({"left":jGo.util.eN($(this).css("left"))+(!a?c:-c)+"px"})})}$("#"+d+"os_start").css({"display":(!a?e:f)});$("#"+d+"xxx").css({"left":(b-this.style.icon_tray.hide_icon.offset)+'px'});this.frame.css({"width":b+"px"});$("#"+d+"toolbar_inner").css({"width":b+"px"});this.close_dialogs();this.reposition()};v.windowEventsHandler=function(a){var b=null;var c=this;var d=function(){clearTimeout(b);b=setTimeout(function(){c.reposition()},80)};if(a){$(window).resize(d);if(this.IE6Mode){$(window).scroll(d)}}else{$(window).unbind('scroll',d);$(window).unbind('resize',d)}};v.reposition=function(){if(this.reposition_enabled){var a=this.frame;this.close_dialogs();if(this.IE6Mode){this.frame.css("display","none");a=$("#"+this.app_prefix+"toolbar_inner");if(this.placement.substr(0,1)=='b'){a.css('top',($(document).scrollTop()+jGo.util.getInnerHeight()-this.style.height)+'px')}else{a.css('top',$(document).scrollTop()+'px')}}else if(this.placement.substr(0,1)=='b'){a.css('top',(jGo.util.getInnerHeight()-this.style.height)+'px')}if(this.placement.indexOf('right')!=-1){a.css('left',(jGo.util.getSWidth()-(this.getCurrentWidth()+this.left_offset))+'px')}this.frame.css("display","block")}};v.show=function(){this.frame.css("visibility","visible");this.isVisible=true};v.hide=function(){this.close_dialogs();this.frame.css("visibility","hidden");this.isVisible=false};v.close=function(){this.frame.empty();this.frame.remove();return true};v.toggle_dialog=function(a,b,c,d){d=d||this.dialbog_fade_interval;if(a.css("display")!="none"){$("div.jGo_dialog").fadeOut(d)}else{this.close_dialogs();b();if(c){c()}a.fadeIn(d)}};v.position_dialog=function(a,b,c,d){var e=(this.IE6Mode?"#"+this.app_prefix+"toolbar_inner":"#"+this.app_prefix+"toolbar");var f=(this.IE6Mode?"absolute":"fixed");var g=Math.max(3,jGo.util.eN($(e).css("left"))+b);var h=Math.min(0,this.getCurrentWidth()-b-(c+3));a.css({position:f,top:(jGo.util.eN($(e).css("top"))-(this.placement.substr(0,1)=='t'?-this.style.height-4:7+d))+'px',left:g+(g+h>3?h:0)+"px"})};v.close_dialogs=function(){$("div.jGo_dialog").css("display","none")};v.destroy=function(){return false}})();jGo.UI.registerWidgetClass(jGo.DefaultToolbar,'DefaultToolbar','complex.controls');jGo.scripts.onLoad('jGo.DefaultToolbar.min.js');